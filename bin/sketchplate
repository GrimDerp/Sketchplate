#!/usr/bin/env node


/**
 usage:
	$	sketchplate --new ~/Sites/myProject --gitinit
	creates a new project, initializes it as a repo
	$	sketchplate --update
	retrieves new copies of all libraries and copies them into template
*/

var program = require('commander'),
	sketchplate = require('../lib/sketchplate');

program
	.version('0.0.2')
	.option('-n, --new [location]', 'New project at [location]','')
	.option('-g, --gitinit', 'Initialize repo after creation')
	.option('-f, --fetch', 'Fetch new copies of all libraries')
	.option('-o, --open [location]', 'Open [location] in editor', '')
	.option('-s, --skipopen', 'Skip opening project in editor')
	.parse(process.argv);

if ( program.fetch ){
	sketchplate.fetchAllLibs();
}
if( program['new'] !== undefined  && program['new'] !== ''){
	sketchplate.create( program['new'], function (err, location){
		if( err ){
			throw Error(err);
		}
		if ( program.gitinit )
			sketchplate.initRepo( location );
			if ( !program.skipopen ){
				sketchplate.openInEditor( location, function (){
					//process.exit(0);
				});
			}
	});
}

if( program.open && program.open.length > 0 ){
	sketchplate.openInEditor( program.open );
}

